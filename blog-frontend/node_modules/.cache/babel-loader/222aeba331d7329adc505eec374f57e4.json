{"ast":null,"code":"import { createAction, handleActions } from 'redux-actions';\nimport { Map } from 'immutable';\nimport { pender } from 'redux-pender';\nimport * as api from 'lib/api'; // action types\n\nconst SHOW_MODAL = 'base/SHOW_MODAL';\nconst HIDE_MODAL = 'base/HIDE_MODAL';\nconst LOGIN = 'base/LOGIN';\nconst LOGOUT = 'base/LOGOUT';\nconst CHECK_LOGIN = 'base/CHECK_LOGIN';\nconst CHANGE_PASSWORD_INPUT = 'base/CHANGE_PASSWORD_INPUT';\nconst INITIALIZE_LOGIN_MODAL = 'base/INITIALIZE_LOGIN_MODAL'; // action creators\n\nexport const showModal = createAction(SHOW_MODAL);\nexport const hideModal = createAction(HIDE_MODAL);\nexport const login = createAction(LOGIN, api.login);\nexport const logout = createAction(LOGOUT, api.logout);\nexport const checkLogin = createAction(CHECK_LOGIN, api.checkLogin);\nexport const changePasswordInput = createAction(CHANGE_PASSWORD_INPUT);\nexport const initializeLoginModal = createAction(INITIALIZE_LOGIN_MODAL); // initial state\n\nconst initialState = Map({\n  // 모달의 가시성 상태\n  modal: Map({\n    remove: false,\n    login: false // 추후 구현될 로그인 모달\n\n  }),\n  // 로그인 모달 상태\n  loginModal: Map({\n    password: '',\n    error: false\n  }),\n  logged: false // 현재 로그인 상태\n\n}); // reducer\n\nexport default handleActions({\n  [SHOW_MODAL]: (state, action) => {\n    const {\n      payload: modalName\n    } = action;\n    return state.setIn(['modal', modalName], true);\n  },\n  [HIDE_MODAL]: (state, action) => {\n    const {\n      payload: modalName\n    } = action;\n    return state.setIn(['modal', modalName], false);\n  },\n  ...pender({\n    type: LOGIN,\n    onSuccess: (state, action) => {\n      // 로그인 성공할 때\n      return state.set('logged', true);\n    },\n    onError: (state, action) => {\n      // 로그인 실패할 때\n      return state.setIn(['loginModal', 'error'], true).setIn(['loginModal', 'password'], '');\n    }\n  }),\n  ...pender({\n    type: CHECK_LOGIN,\n    onSuccess: (state, action) => {\n      const {\n        logged\n      } = action.payload.data;\n      return state.set('logged', logged);\n    }\n  }),\n  [CHANGE_PASSWORD_INPUT]: (state, action) => {\n    const {\n      payload: value\n    } = action;\n    return state.setIn(['loginModal', 'password'], value);\n  },\n  [INITIALIZE_LOGIN_MODAL]: (state, actions) => {\n    // 로그인 모달의 상태를 초기 상태로 설정 (텍스트/오류 초기화)\n    return state.set('loginModal', initialState.get('loginModal'));\n  }\n}, initialState);","map":{"version":3,"sources":["D:/문서/개발/react/blog/blog-frontend/src/store/modules/base.js"],"names":["createAction","handleActions","Map","pender","api","SHOW_MODAL","HIDE_MODAL","LOGIN","LOGOUT","CHECK_LOGIN","CHANGE_PASSWORD_INPUT","INITIALIZE_LOGIN_MODAL","showModal","hideModal","login","logout","checkLogin","changePasswordInput","initializeLoginModal","initialState","modal","remove","loginModal","password","error","logged","state","action","payload","modalName","setIn","type","onSuccess","set","onError","data","value","actions","get"],"mappings":"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","sourcesContent":["import { createAction, handleActions } from 'redux-actions';\r\n\r\nimport { Map } from 'immutable';\r\nimport { pender } from 'redux-pender';\r\n\r\nimport * as api from 'lib/api';\r\n\r\n// action types\r\nconst SHOW_MODAL = 'base/SHOW_MODAL';\r\nconst HIDE_MODAL = 'base/HIDE_MODAL';\r\n\r\nconst LOGIN = 'base/LOGIN';\r\nconst LOGOUT = 'base/LOGOUT';\r\nconst CHECK_LOGIN = 'base/CHECK_LOGIN';\r\nconst CHANGE_PASSWORD_INPUT = 'base/CHANGE_PASSWORD_INPUT';\r\nconst INITIALIZE_LOGIN_MODAL = 'base/INITIALIZE_LOGIN_MODAL';\r\n\r\n// action creators\r\nexport const showModal = createAction(SHOW_MODAL);\r\nexport const hideModal = createAction(HIDE_MODAL);\r\n\r\nexport const login = createAction(LOGIN, api.login);\r\nexport const logout = createAction(LOGOUT, api.logout);\r\nexport const checkLogin = createAction(CHECK_LOGIN, api.checkLogin);\r\nexport const changePasswordInput = createAction(CHANGE_PASSWORD_INPUT);\r\nexport const initializeLoginModal= createAction(INITIALIZE_LOGIN_MODAL);\r\n\r\n// initial state\r\nconst initialState = Map({\r\n    // 모달의 가시성 상태\r\n    modal: Map({\r\n        remove: false,\r\n        login: false // 추후 구현될 로그인 모달\r\n    }),\r\n    // 로그인 모달 상태\r\n    loginModal: Map({\r\n        password: '',\r\n        error: false\r\n    }),\r\n    logged: false // 현재 로그인 상태\r\n});\r\n\r\n// reducer\r\nexport default handleActions({\r\n    [SHOW_MODAL]: (state, action) => {\r\n        const {payload: modalName} = action;\r\n        return state.setIn(['modal', modalName], true);\r\n    },\r\n    [HIDE_MODAL]: (state, action) => {\r\n        const {payload: modalName} = action;\r\n        return state.setIn(['modal', modalName], false);\r\n    },\r\n    ...pender({\r\n        type: LOGIN,\r\n        onSuccess: (state, action) => { // 로그인 성공할 때\r\n            return state.set('logged', true)\r\n        },\r\n        onError: (state, action) => { // 로그인 실패할 때\r\n            return state.setIn(['loginModal', 'error'], true)\r\n                        .setIn(['loginModal', 'password'], '');\r\n        }\r\n    }),\r\n    ...pender({\r\n        type: CHECK_LOGIN,\r\n        onSuccess: (state, action) => {\r\n            const { logged } = action.payload.data;\r\n            return state.set('logged', logged);\r\n        }\r\n    }),\r\n    [CHANGE_PASSWORD_INPUT]: (state, action) => {\r\n        const { payload: value} = action;\r\n        return state.setIn(['loginModal', 'password'], value);\r\n    },\r\n    [INITIALIZE_LOGIN_MODAL]: (state, actions) => {\r\n        // 로그인 모달의 상태를 초기 상태로 설정 (텍스트/오류 초기화)\r\n        return state.set('loginModal', initialState.get('loginModal'));\r\n    }\r\n}, initialState)"]},"metadata":{},"sourceType":"module"}